package com.sample

import com.sample.GUI
 
declare Question
	question : String
	answer : String
end

function Question askQuestion(String q, String[] options) {
    GUI gui = new GUI();
    String answer = gui.window(q, options);
    System.out.println( answer );
    Question quest = new Question(q, answer);
   	return quest;
}

function void showAnswer(String ans) {
	GUI gui = new GUI();
    String answer = gui.window(ans, null);
    System.out.println( answer );
}


rule "Which genre interest you?"
	when
	then
		String[] options = {"Medieval Fantasy", "Far Future",
   				 "Mecha", "Generes related to near present",
   				 "Westerns", "Supers", "Other Alternate History",
   				 "Genre Shouldn't matter"};
	 	
	   	Question nextq = askQuestion("Which genre interest you?", options);
	   	insert(nextq);
end

rule "Which subgenre?"
	when
		$q : Question(question == "Which genre interest you?", answer == "Medieval Fantasy")
	then
		String[] options = {"Oriental", "Humor", "High Fantasy/General", "High magic", "Low Fantasy"};
	 
	   	Question nextq = askQuestion("Which subgenre?", options);
	   	insert(nextq);
end

rule "With meta-plots and CCG element?"
	when
		$q : Question(question == "Which subgenre?", answer == "Oriental")
	then
		String[] options = {"Yes", "No"};

	   	Question nextq = askQuestion("With meta-plots and CCG element?", options);
	   	insert(nextq);
end

rule "FATE based d20 based or neither?"
	when
		$q : Question(question == "Which genre interests you?", answer == "Other Alternate History")
	then
		String[] options = {"FATE", "d20", "Neither"};

	   	Question nextq = askQuestion("FATE based d20 based or neither?", options);
	   	insert(nextq);
end

rule "D20 Past"
	when
		$q : Question(question == "FATE based d20 based or neither?", answer == "d20")
	then
	 	showAnswer("D20 Past");
end

rule "Pick a subgenre"
	when
		$q : Question(question == "FATE based d20 based or neither?", answer == "Neither")
	then
		String[] options = {"Pulp", "Japanese/Samurai", "Mobsters 1930s"};

	   	Question nextq = askQuestion("Pick a subgenre", options);
	   	insert(nextq);
end

rule "Pulp"
	when
		$q : Question(question == "Pick a subgenre", answer == "Pulp")
	then
	 	showAnswer("Pulp");
end

rule "Bushido"
	when
		$q : Question(question == "Pick a subgenre", answer == "Japanese/Samurai")
	then
	 	showAnswer("Bushido");
end

rule "Gangbusters"
	when
		$q : Question(question == "Pick a subgenre", answer == "Mobsters 1930s")
	then
	 	showAnswer("Gangbusters");
end

rule "Supernatural or pulp?"
	when
		$q : Question(question == "FATE based d20 based or neither?", answer == "FATE")
	then
		String[] options = {"Pulp", "Supernatural"};

	   	Question nextq = askQuestion("Supernatural or pulp?", options);
	   	insert(nextq);
end

rule "Spirit of the Century"
	when
		$q : Question(question == "Supernatural or pulp?", answer == "Pulp")
	then
	 	showAnswer("Spirit of the Century");
end

rule "Dresden Files"
	when
		$q : Question(question == "Supernatural or pulp?", answer == "Supernatural")
	then
	 	showAnswer("Dresden Files");
end





